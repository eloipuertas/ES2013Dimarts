$(function(){$("#supernav_login").submit(function(){var a=$(this).find('input[name="EmailAddress"]').val(),b=$(this).find('input[name="Password"]').val();if(""!=a&&""!=b){if(isValidEmail(a)?($("form#supernav_login").find("input").removeClass("error"),$("form#supernav_login").find("input").addClass("working"),$("ul#supernav_ui").find("li#submit_wrapper").hide(),$("ul#supernav_ui").find("li.progress_indicator").show(),$.ajax({type:"GET",url:"/storm/user/checkUpdateStatus.php",data:"EmailAddress="+encodeURIComponent(a)+
"&Password="+encodeURIComponent(b),success:function(c){c=$.parseJSON(c);"200"==c.Status?loginUser(a,b):"202"==c.Status?showUpdateModal(a,b,c.Callsign):($("#supernav_login_email").addClass("error").val(validate.incorrectPasswordOrEmail),$("form#supernav_login").find("input").removeClass("working"),$("ul#supernav_ui").find("li.progress_indicator").hide(),$("ul#supernav_ui").find("li#submit_wrapper").show(),$("#supernav_login_password").blur().val(""))}})):$(this).find('input[name="EmailAddress"]').addClass("error").val(validate.invalidEmail),
!isChrome)return!1}else return!1});$("#supernav_login input").focus(function(){$(this).removeClass("error").val("")});$("#supernav_ui").on("click","li#sn_email_signup",function(a){a.stopPropagation();$("div#sn-email-reg-dropdown-wrapper").show();$(this).addClass("active")});$("#sn-email-reg-dropdown").on("click",function(a){$(a.target).hasClass("privacy-policy")||a.stopPropagation()});$(document).click(function(){$("div#sn-email-reg-dropdown-wrapper").hide();resetEmailReg()});$("#sn-email-reg-dropdown button.cancel-email-reg").click(function(){$("div#sn-email-reg-dropdown-wrapper").hide();
resetEmailReg()});$("#sn-email-reg-dropdown button.submit-email-reg").click(function(){(validEmailReg=validateEmailReg())&&$.ajax({type:"POST",url:"/storm/user/addUserToEmailList.php",data:$("#supernav_email_reg_form").serialize(),success:function(a){a=$.parseJSON(a);200<=a.Status&&300>a.Status||hawkenError(a.Status+" - "+a.Message,150,400);$("div#sn-email-reg-dropdown-wrapper").hide()}})})});
function validateEmailReg(){$("form#supernav_email_reg_form span.error").hide();var a=!0;isValidEmail($("#sn-email-reg-email").val())?($("#sn-email-reg-email").val(),$.ajax({type:"POST",async:!1,url:"/storm/user/checkIfEmailExists.php",data:"EmailAddress="+encodeURIComponent($("#sn-email-reg-email").val()),success:function(b){"404"!=$.parseJSON(b).Status&&($("form#supernav_email_reg_form span.error").text(validate.emailInUseShort).show(),a=!1)}})):($("form#supernav_email_reg_form span.error").text(validate.invalidEmailShort).show(),
a=!1);return a}function resetEmailReg(){$("form#supernav_email_reg_form span.error").hide();$("form#supernav_email_reg_form input#sn-email-reg-email").val("");$("form#supernav_email_reg_form input#sn-email-reg-name").val("");$("li#sn_email_signup").removeClass("active")};
